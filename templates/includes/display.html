<table class = "table table-dark table-stripped">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Value</th>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
        </tr>
    </thead>
    <tbody id="table_body">
        {% for indexes in data %}
            <tr>
                <td id="id_{{ indexes.id }}", style="text-align:center;">{{ indexes.id }}</td>
                <td id="name_{{ indexes.id }}", style="text-align:center;">{{ indexes.name }}</td>
                <td id="value_{{ indexes.id }}", style="text-align:center;">{{ indexes.value }}</td>
                <td id="date_{{ indexes.id }}", style="text-align:center;">{{ indexes.date }}</td>
                <td id="time_{{ indexes.id }}", style="text-align:center;">{{ indexes.time }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<br>

<script>
    setInterval(function()
    {
        console.log("hello from Display")
        fetch('/data_json').then(
            response => response.json()
        ).then(
            data => 
                data.forEach(val => 
                    updateElement(val),
                    console.log("Updated Data")
                )
        )
    }, 1000); 

function updateElement(val){
    Object.entries(val).forEach(([key,value]) => {
        element = document.getElementById(key.toString() + "_" + val.id.toString());
        previousValue = element.innerHTML;

        if(previousValue !== value.toString())
        {
            element.innerHTML = value.toString();
        }
    }) 
}

function blinkUpdate(element, newValue, newColor = '#00FF00')
{
    previousColor = element.style.color;
    element.innerHTML = newValue;
    element.style.color = newColor;
    //Set time out to back to the original
    setTimeout(() => {
        element.style.color = previousColor
    }, 1000)
}
</script>